{"version":3,"sources":["sdk/bin/config/config.js","sdk/bin/main.js","sdk/bin/routes/routes.js","utils/utils.ts","page/home/Home.tsx","page/history/History.tsx","router/index.ts","components/langage/langage.tsx","store/calculate.ts","store/index.ts","locales/i18n.js","App.tsx","reportWebVitals.ts","index.tsx"],"names":["__importDefault","this","mod","__esModule","Object","defineProperty","exports","value","Configure","ERC20Contract","BridgePortContract","BridgeCenterContract","web3_1","require","net_1","routes_1","WS","url","default","providers","WebsocketProvider","timeout","clientConfig","maxReceivedFrameSize","maxReceivedMessageSize","keepalive","keepaliveInterval","reconnect","auto","delay","maxAttempts","onTimeout","IPC","path","IpcProvider","HTTP","HttpProvider","parseProvider","test","web3Of","chainIdentifier","readOnly","_web3Instance","get","load","configJson","p","hostCenterAddress","center","chain","Route","ChainIdentifier","parse","has","set","Map","undefined","pk","existChainIdentifiers","push","Array","__extends","extendStatics","d","b","setPrototypeOf","__proto__","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","pop","length","SDK","Exception","bn_js_1","events_1","config_1","_super","code","message","_this","GetFeeConfigTimeOut","NotFoundWeb3Config","InsufficientBalanceCoin","InsufficientBalanceToken","InsufficientAllowance","Error","ApproveStateObserver","centerContract","txHash","observerMethod","methods","approveStateOf","_sleep","ms","_a","setTimeout","isEqualApproveState","a","successedTime","verifyed","start","emitter","state","s","utils","toBN","voted","toNumber","latestResponseState","emit","_intoFeeConfigs","_leaveFeeConfigs","_routeServices","Services","_hostWeb3","host","_centerContract","eth","Contract","abi","configure","config","verifiesTotalCount","verifiers","verifies","transferIntoOperator","fromChain","getPortContractAddress","l","transferLeaveOperator","isERC20Token","tokenBlog","contractAddress","isMainTokenAddreses","addreses","supportedChains","routeList","ret","_routeListCompelte","forEach","r","includes","toString","map","decode","supportedAssetsOf","contractAddresses","web3","plist","getRoutesList","chainTokenContract","anchorToken","address","tokenContract","_b","decimals","symbol","name","all","calculationIntoFee","fromToken","amount","route","feeConfig","_c","getEntranceRoute","chainPortContract","feeConfigOf","assetFee","minerFee","catch","mul","div","calculationLeaveFee","toChainIdentifier","toBytes32","doTransferInto","provider","fromAddress","toAddress","EventEmitter","_transferIntoERC20Token","_transferIntoMainCoin","on","removeAllListeners","doTransferLeave","toChain","_transferLeaveERC20Token","_transferLeaveMainCoin","fee","assetBalance","needBalance","portContract","hweb3","method","getBalance","add","gt","getPortContracts","c","brunToBridge","from","error","send","receipt","once","hash","erc20Token","coinBalance","needAssetBalance","allowance","centerContractInstance","balanceOf","gas","transferToBridge","_rouoteList","chainName","ethereum","heco","bnb","chainIdHex","chianName","equal","other","toLowerCase","contract","response","getRouteTotalCount","count","Number","identifier","totalCount","routes","i","chainId","getRoutesRange","list","portList","portContracts","haloHost","window","location","protocol","MAIN_ADDRESS","callWeb3","Web3","sendWeb3","callContracts","sendContracts","keyStract","Contracts","keys","key","sdkWay","supportedAssetsOfAdd","chainlist","supportedAssets","item","index","chainID","img","filter","messageWay","val","msg","styles","marginTop","success","content","duration","style","loading","convertAmount","amountText","decimas","parts","split","intergralPart","floatPart","slice","pow","parseInt","console","log","supplementWay","parseFloat","xsd","str","setSessionStorage","sessionStorage","setItem","getSessionStorage","getItem","fromTokens","contractToken","sdk","Option","Select","Home","props","componentDidMount","init","componentWillUnmount","setState","callback","getChainId","getBlock","blockHash","data","chainIDConnect","getBalanceMain","storeAddress","isConnect","moneyList","Identifier","approveToken","opreator","approve","toWei","btnLoadings","res","isApprove","err","isMessage","numValue","successUpdate","getBalanceAndAllowance","selectChange","textVal","selectName","balance","fromWei","currency","mainSelect","mainBalance","btnText","conversion","exchange","HistoryPage","JSON","stringify","history","pathname","serviceCharge","isShade","$address","storeisMobile","isMobile","text","isNext","isAddress","target","className","allowClear","dropdownClassName","placeholder","onSelect","src","alt","onClick","onChange","toAddressOnInput","fontSize","marginLeft","type","handleOnInput","complete","Component","publicChainArr","routers","component","getSissList","search","indexOf","goBack","getBlockNumber","BlockNumber","isGetChain","Numbers","isDisetMore","getHistory","event","getPastEvents","fromBlock","events","recordPushWay","reverse","chainArr","getSeinList","chiress","returnValues","toChainTokenAddress","time","dateTimeWay","sender","img1","text1","img2","text2","detailList","goback","chainList","showUser","userAddress","isMore","identifierList","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","span","color","Langage","useTranslation","i18n","defaultValue","localStorage","width","changeLanguage","INCREMENT","INSERTISMOBILE","initData","isMobileData","rootReducers","combineReducers","calculate","action","isMobileWay","store","createStore","use","initReactI18next","fallbackLng","resources","en","translation","en_translate","zh_CN","zh_translation","debug","interpolation","escapeValue","moment","locale","App","useState","document","documentElement","offsetWidth","getState","setAddress","accounts","reload","networkChanged","request","zhCN","router","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a1b8169b.chunk.js","sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Configure = exports.ERC20Contract = exports.BridgePortContract = exports.BridgeCenterContract = void 0;\r\nvar web3_1 = __importDefault(require(\"web3\"));\r\nvar net_1 = __importDefault(require(\"net\"));\r\nvar routes_1 = require(\"../routes/routes\");\r\nexports.BridgeCenterContract = require('../../contracts/BridgeCenter.json');\r\nexports.BridgePortContract = require('../../contracts/BridgePort.json');\r\nexports.ERC20Contract = require('../../contracts/ERC20.json');\r\nvar Configure = /** @class */ (function () {\r\n    function Configure() {\r\n    }\r\n    // https://web3js.readthedocs.io/en/v1.3.4/web3.html?highlight=WebsocketProvider#configuration\r\n    Configure.WS = function (url) {\r\n        return new web3_1.default.providers.WebsocketProvider(url, {\r\n            timeout: 30000,\r\n            clientConfig: {\r\n                maxReceivedFrameSize: 100000000,\r\n                maxReceivedMessageSize: 100000000,\r\n                keepalive: true,\r\n                keepaliveInterval: 5000 // ms\r\n            },\r\n            reconnect: {\r\n                auto: true,\r\n                delay: 5000,\r\n                maxAttempts: 50,\r\n                onTimeout: false\r\n            }\r\n        });\r\n    };\r\n    Configure.IPC = function (path) {\r\n        return new web3_1.default.providers.IpcProvider(path, net_1.default);\r\n    };\r\n    Configure.HTTP = function (url) {\r\n        return new web3_1.default.providers.HttpProvider(url);\r\n    };\r\n    Configure.parseProvider = function (url) {\r\n        var wsReg = /^ws{1,2}:\\/\\/.*$/g;\r\n        var ipcReg = /^\\/.*.ipc$/g;\r\n        if (wsReg.test(url)) {\r\n            return Configure.WS(url);\r\n        }\r\n        else if (ipcReg.test(url)) {\r\n            return Configure.IPC(url);\r\n        }\r\n        else {\r\n            return Configure.HTTP(url);\r\n        }\r\n        // throw 'Only supports [Websocket, IPC] mode connection.'\r\n    };\r\n    Configure.web3Of = function (chainIdentifier, readOnly) {\r\n        if (readOnly === void 0) { readOnly = true; }\r\n        return Configure._web3Instance.get(chainIdentifier).get(readOnly);\r\n    };\r\n    Configure.load = function (configJson) {\r\n        Configure.hostCenterAddress = configJson.center;\r\n        for (var p in configJson.providers) {\r\n            var chain = routes_1.Route.ChainIdentifier.parse(p);\r\n            if (Configure._web3Instance.has(chain)) {\r\n                continue;\r\n            }\r\n            Configure._web3Instance.set(chain, new Map());\r\n            Configure._web3Instance.get(routes_1.Route.ChainIdentifier.parse(p)).set(true, new web3_1.default(Configure.parseProvider(configJson.providers[p])));\r\n            if (configJson.pk != undefined && configJson.pk[p] != null) {\r\n                Configure._web3Instance.get(routes_1.Route.ChainIdentifier.parse(p)).set(false, new web3_1.default(Configure.parseProvider(configJson.providers[p])));\r\n            }\r\n            Configure.existChainIdentifiers.push(routes_1.Route.ChainIdentifier.parse(p));\r\n        }\r\n    };\r\n    Configure.existChainIdentifiers = new Array();\r\n    // Web3实例，保证同链同类型只有一个，防止nonce冲突\r\n    Configure._web3Instance = new Map();\r\n    return Configure;\r\n}());\r\nexports.Configure = Configure;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SDK = exports.Exception = void 0;\r\nvar web3_1 = __importDefault(require(\"web3\"));\r\nvar bn_js_1 = __importDefault(require(\"bn.js\"));\r\nvar events_1 = require(\"events\");\r\nvar routes_1 = require(\"./routes/routes\");\r\nvar config_1 = require(\"./config/config\");\r\nvar Exception = /** @class */ (function (_super) {\r\n    __extends(Exception, _super);\r\n    function Exception(code, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = code;\r\n        return _this;\r\n    }\r\n    // 无法获取手续费\r\n    Exception.GetFeeConfigTimeOut = new Exception(-1, 'Unable to get handling charge configuration');\r\n    Exception.NotFoundWeb3Config = new Exception(-2, 'Unable to find the corresponding Web3 instance configuration');\r\n    Exception.InsufficientBalanceCoin = new Exception(-3, 'Insufficient balance of main coin');\r\n    Exception.InsufficientBalanceToken = new Exception(-4, 'Insufficient balance of asset token');\r\n    Exception.InsufficientAllowance = new Exception(-5, 'Insufficient allowance of asset token');\r\n    return Exception;\r\n}(Error));\r\nexports.Exception = Exception;\r\nvar ApproveStateObserver = /** @class */ (function () {\r\n    function ApproveStateObserver(centerContract, txHash) {\r\n        this.observerMethod = centerContract.methods.approveStateOf(txHash);\r\n    }\r\n    ApproveStateObserver.prototype._sleep = function (ms) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new Promise(function (resolve) {\r\n                        setTimeout(function () {\r\n                            resolve('');\r\n                        }, ms);\r\n                    })];\r\n            });\r\n        });\r\n    };\r\n    ApproveStateObserver.prototype.isEqualApproveState = function (a, b) {\r\n        return (a == b) || (a != undefined && b != undefined &&\r\n            a.successedTime == b.successedTime &&\r\n            a.verifyed == b.verifyed);\r\n    };\r\n    ApproveStateObserver.prototype.start = function (emitter) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var state;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!true) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.observerMethod.call().then(function (s) {\r\n                                return {\r\n                                    verifyed: web3_1.default.utils.toBN(s.voted).toNumber(),\r\n                                    successedTime: web3_1.default.utils.toBN(s.successedTime).toNumber(),\r\n                                };\r\n                            })];\r\n                    case 1:\r\n                        state = _a.sent();\r\n                        if (!this.isEqualApproveState(this.latestResponseState, state)) {\r\n                            this.latestResponseState = state;\r\n                            if (state.verifyed > 0) {\r\n                                emitter.emit('verifyStateChanged', this.latestResponseState);\r\n                            }\r\n                        }\r\n                        if (state.successedTime > 0) {\r\n                            emitter.emit('verifyStateSuccessed', state);\r\n                            return [3 /*break*/, 3];\r\n                        }\r\n                        return [4 /*yield*/, this._sleep(3000)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 0];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ApproveStateObserver;\r\n}());\r\nvar SDK = /** @class */ (function () {\r\n    function SDK() {\r\n        this._intoFeeConfigs = new Map();\r\n        this._leaveFeeConfigs = new Map();\r\n        this._routeServices = new routes_1.Route.Services();\r\n        this._hostWeb3 = config_1.Configure.web3Of(routes_1.Route.ChainIdentifier.host);\r\n        this._centerContract = new this._hostWeb3.eth.Contract(config_1.BridgeCenterContract.abi, config_1.Configure.hostCenterAddress);\r\n    }\r\n    SDK.configure = function (config) {\r\n        config_1.Configure.load(config);\r\n    };\r\n    /**\r\n     * 当前验证人的总数量\r\n     * @returns {number}\r\n     */\r\n    SDK.prototype.verifiesTotalCount = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._centerContract.methods.verifiers().call().then(function (verifies) { return verifies.toNumber(); })];\r\n            });\r\n        });\r\n    };\r\n    SDK.prototype.transferIntoOperator = function (fromChain) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, this._routeServices.getPortContractAddress(fromChain).then(function (l) { return l[0]; })];\r\n            });\r\n        });\r\n    };\r\n    SDK.prototype.transferLeaveOperator = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, config_1.Configure.hostCenterAddress];\r\n            });\r\n        });\r\n    };\r\n    SDK.prototype.isERC20Token = function (tokenBlog) {\r\n        return tokenBlog.contractAddress != undefined &&\r\n            tokenBlog.contractAddress.length >= 40 &&\r\n            tokenBlog.contractAddress != '0x8888888888888888888888888888888888888888' &&\r\n            tokenBlog.contractAddress != '8888888888888888888888888888888888888888';\r\n    };\r\n    SDK.prototype.isMainTokenAddreses = function (addreses) {\r\n        return addreses == '0x8888888888888888888888888888888888888888' ||\r\n            addreses == '8888888888888888888888888888888888888888';\r\n    };\r\n    /**\r\n     * 获取当前支持验证的链标识符列表\r\n     */\r\n    SDK.prototype.supportedChains = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var routeList, ret;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._routeListCompelte()];\r\n                    case 1:\r\n                        routeList = _a.sent();\r\n                        ret = new Array();\r\n                        routeList.forEach(function (r) {\r\n                            if (!ret.includes(r.chainIdentifier.toString())) {\r\n                                ret.push(r.chainIdentifier.toString());\r\n                            }\r\n                        });\r\n                        return [2 /*return*/, ret.map(routes_1.Route.ChainIdentifier.decode)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 获取指定链上支持跨链交易的资产列表\r\n     * @param chainIdentifier 当前用户选择的链标记，或者说当前用户连接的网络对应的标记\r\n     */\r\n    SDK.prototype.supportedAssetsOf = function (chainIdentifier) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var routeList, contractAddresses, web3, plist;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this._routeServices.getRoutesList()];\r\n                    case 1:\r\n                        routeList = _a.sent();\r\n                        contractAddresses = new Array();\r\n                        if (chainIdentifier != routes_1.Route.ChainIdentifier.host) {\r\n                            routeList.forEach(function (r) {\r\n                                if (!contractAddresses.includes(r.chainTokenContract)) {\r\n                                    contractAddresses.push(r.chainTokenContract);\r\n                                }\r\n                            });\r\n                        }\r\n                        else {\r\n                            routeList.forEach(function (r) {\r\n                                if (!contractAddresses.includes(r.anchorToken)) {\r\n                                    contractAddresses.push(r.anchorToken);\r\n                                }\r\n                            });\r\n                        }\r\n                        web3 = config_1.Configure.web3Of(chainIdentifier);\r\n                        plist = contractAddresses.map(function (address) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var tokenContract;\r\n                            var _a;\r\n                            return __generator(this, function (_b) {\r\n                                switch (_b.label) {\r\n                                    case 0:\r\n                                        if (!this.isMainTokenAddreses(address)) return [3 /*break*/, 1];\r\n                                        return [2 /*return*/, {\r\n                                                chainIdentifier: chainIdentifier,\r\n                                                contractAddress: address,\r\n                                                decimals: 18,\r\n                                            }];\r\n                                    case 1:\r\n                                        tokenContract = new web3.eth.Contract(config_1.ERC20Contract.abi, address);\r\n                                        _a = {\r\n                                            chainIdentifier: chainIdentifier,\r\n                                            contractAddress: address\r\n                                        };\r\n                                        return [4 /*yield*/, tokenContract.methods.symbol().call()];\r\n                                    case 2:\r\n                                        _a.symbol = (_b.sent());\r\n                                        return [4 /*yield*/, tokenContract.methods.decimals().call()];\r\n                                    case 3:\r\n                                        _a.decimals = (_b.sent());\r\n                                        return [4 /*yield*/, tokenContract.methods.name().call()];\r\n                                    case 4: return [2 /*return*/, (_a.name = (_b.sent()),\r\n                                            _a)];\r\n                                }\r\n                            });\r\n                        }); });\r\n                        return [4 /*yield*/, Promise.all(plist)];\r\n                    case 2: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 计算对应跨入交易需要的手续费\r\n     * @param fromToken 来源链对应的Token\r\n     * @param amount 数量，只接收BN结构，并且要求是wei单位\r\n     * @returns {Fee}\r\n     * @throws {Exception}\r\n     */\r\n    SDK.prototype.calculationIntoFee = function (fromToken, amount) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var route, web3, feeConfig, portInstance;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0: return [4 /*yield*/, this._routeServices.getEntranceRoute(fromToken.chainIdentifier, fromToken.contractAddress)];\r\n                    case 1:\r\n                        route = _c.sent();\r\n                        web3 = config_1.Configure.web3Of(fromToken.chainIdentifier);\r\n                        feeConfig = (_a = this._intoFeeConfigs.get(fromToken.chainIdentifier)) === null || _a === void 0 ? void 0 : _a.get(fromToken);\r\n                        if (!(feeConfig == undefined)) return [3 /*break*/, 3];\r\n                        portInstance = new web3.eth.Contract(config_1.BridgePortContract.abi, route.chainPortContract);\r\n                        return [4 /*yield*/, portInstance.methods\r\n                                .feeConfigOf(fromToken.contractAddress).call()\r\n                                .then(function (result) {\r\n                                return {\r\n                                    assetFee: web3.utils.toBN(result.assetFee),\r\n                                    minerFee: web3.utils.toBN(result.minerFee)\r\n                                };\r\n                            }).catch(function (e) {\r\n                                throw Exception.GetFeeConfigTimeOut;\r\n                            })];\r\n                    case 2:\r\n                        feeConfig = _c.sent();\r\n                        _c.label = 3;\r\n                    case 3:\r\n                        // 备份已获取的结果\r\n                        if (this._intoFeeConfigs.get(fromToken.chainIdentifier) == null) {\r\n                            this._intoFeeConfigs.set(fromToken.chainIdentifier, new Map());\r\n                        }\r\n                        if (this._intoFeeConfigs.get(fromToken.chainIdentifier).get(fromToken) == null) {\r\n                            (_b = this._intoFeeConfigs.get(fromToken.chainIdentifier)) === null || _b === void 0 ? void 0 : _b.set(fromToken, feeConfig);\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                assetFee: amount.mul(feeConfig.assetFee).div(new bn_js_1.default(1e12)),\r\n                                minerFee: feeConfig.minerFee\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SDK.prototype.calculationLeaveFee = function (fromToken, toChainIdentifier, amount) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var web3, feeConfig;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        web3 = config_1.Configure.web3Of(routes_1.Route.ChainIdentifier.host);\r\n                        feeConfig = (_a = this._leaveFeeConfigs.get(toChainIdentifier)) === null || _a === void 0 ? void 0 : _a.get(fromToken);\r\n                        if (!(feeConfig == undefined)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this._centerContract.methods.feeConfigOf(fromToken.contractAddress, toChainIdentifier.toBytes32()).call().then(function (result) {\r\n                                return {\r\n                                    assetFee: web3.utils.toBN(result.assetFee),\r\n                                    minerFee: web3.utils.toBN(result.minerFee)\r\n                                };\r\n                            }).catch(function (e) {\r\n                                throw Exception.GetFeeConfigTimeOut;\r\n                            })];\r\n                    case 1:\r\n                        feeConfig = _c.sent();\r\n                        _c.label = 2;\r\n                    case 2:\r\n                        // 备份已获取的结果\r\n                        if (this._leaveFeeConfigs.get(toChainIdentifier) == null) {\r\n                            this._leaveFeeConfigs.set(toChainIdentifier, new Map());\r\n                        }\r\n                        if (this._leaveFeeConfigs.get(toChainIdentifier).get(fromToken) == null) {\r\n                            (_b = this._leaveFeeConfigs.get(toChainIdentifier)) === null || _b === void 0 ? void 0 : _b.set(fromToken, feeConfig);\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                assetFee: amount.mul(feeConfig.assetFee).div(new bn_js_1.default(1e12)),\r\n                                minerFee: feeConfig.minerFee\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 将对应资产跨链交易到目标链，仅到宿主链\r\n     *\r\n     * @param provider 当前用户选择的网络对应的provider，比如 window.ethereum\r\n     * @param fromToken 需要快入的资产，通过{supportedAssetsOf}查询得来的结果\r\n     * @param fromAddress 当前发送人的地址，如window.ethereum.address 或者 window.ethereum.selectedAddress等\r\n     * @param toAddress 对应目标链的接受地址，也可以是自己\r\n     * @param amount 数量，(wei)\r\n     * @returns EventEmitter\r\n     */\r\n    SDK.prototype.doTransferInto = function (provider, fromToken, fromAddress, toAddress, amount) {\r\n        var emitter = new events_1.EventEmitter();\r\n        this.isERC20Token(fromToken)\r\n            ? this._transferIntoERC20Token(provider, fromToken, fromAddress, toAddress, amount, emitter)\r\n            : this._transferIntoMainCoin(provider, fromToken, fromAddress, toAddress, amount, emitter);\r\n        return emitter.on('error', function () {\r\n            emitter.removeAllListeners();\r\n        }).on('verifyStateSuccessed', function () {\r\n            emitter.removeAllListeners();\r\n        });\r\n        ;\r\n    };\r\n    SDK.prototype.doTransferLeave = function (provider, fromToken, fromAddress, toChain, toAddress, amount) {\r\n        var emitter = new events_1.EventEmitter();\r\n        this.isERC20Token(fromToken)\r\n            ? this._transferLeaveERC20Token(provider, fromToken, fromAddress, toChain, toAddress, amount, emitter)\r\n            : this._transferLeaveMainCoin(provider, fromToken, fromAddress, toChain, toAddress, amount, emitter);\r\n        return emitter.on('error', function () {\r\n            emitter.removeAllListeners();\r\n        }).on('verifyStateSuccessed', function () {\r\n            emitter.removeAllListeners();\r\n        });\r\n    };\r\n    /**\r\n         * 转出主币\r\n         */\r\n    SDK.prototype._transferLeaveMainCoin = function (provider, fromToken, fromAddress, toChain, toAddress, amount, emitter) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var web3, fee, assetBalance, needBalance, observer, portContract, hweb3, centerContract, method, callSuccessed;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        web3 = new web3_1.default(provider);\r\n                        return [4 /*yield*/, this.calculationLeaveFee(fromToken, toChain, amount)];\r\n                    case 1:\r\n                        fee = _a.sent();\r\n                        return [4 /*yield*/, web3.eth.getBalance(fromAddress).then(web3.utils.toBN)];\r\n                    case 2:\r\n                        assetBalance = _a.sent();\r\n                        needBalance = amount.add(fee.assetFee).add(fee.minerFee);\r\n                        // needBalance > assetBalance\r\n                        if (needBalance.gt(assetBalance)) {\r\n                            throw Exception.InsufficientBalanceCoin;\r\n                        }\r\n                        return [4 /*yield*/, this._routeServices.getPortContracts(toChain).then(function (c) { return c[0]; })];\r\n                    case 3:\r\n                        portContract = _a.sent();\r\n                        hweb3 = new web3_1.default(provider);\r\n                        centerContract = new hweb3.eth.Contract(config_1.BridgeCenterContract.abi, config_1.Configure.hostCenterAddress);\r\n                        method = centerContract.methods.brunToBridge(fromToken.contractAddress, toChain.toBytes32(), toAddress, amount);\r\n                        return [4 /*yield*/, method.call({ from: fromAddress, value: needBalance })\r\n                                .catch(function (error) {\r\n                                emitter.emit('error', error);\r\n                            })];\r\n                    case 4:\r\n                        callSuccessed = _a.sent();\r\n                        if (callSuccessed) {\r\n                            method.send({ from: fromAddress, value: needBalance })\r\n                                .on('confirmation', function (receipt) {\r\n                                emitter.emit('confirmation', receipt);\r\n                            })\r\n                                .once('transactionHash', function (hash) {\r\n                                emitter.emit('transactionHash', hash);\r\n                                observer = new ApproveStateObserver(portContract, hash);\r\n                                observer.start(emitter);\r\n                            })\r\n                                .once('receipt', function (receipt) {\r\n                                emitter.emit('receipt', receipt);\r\n                            })\r\n                                .once('error', function (error) {\r\n                                emitter.emit('error', error);\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 转出ERC20代币\r\n     */\r\n    SDK.prototype._transferLeaveERC20Token = function (provider, fromToken, fromAddress, toChain, toAddress, amount, emitter) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var web3, erc20Token, fee, coinBalance, assetBalance, needAssetBalance, allowance, portContract, observer, centerContractInstance, method, callSuccessed;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        web3 = new web3_1.default(provider);\r\n                        erc20Token = new web3.eth.Contract(config_1.ERC20Contract.abi, fromToken.contractAddress);\r\n                        return [4 /*yield*/, this.calculationLeaveFee(fromToken, toChain, amount)];\r\n                    case 1:\r\n                        fee = _a.sent();\r\n                        return [4 /*yield*/, web3.eth.getBalance(fromAddress).then(web3.utils.toBN)];\r\n                    case 2:\r\n                        coinBalance = _a.sent();\r\n                        return [4 /*yield*/, erc20Token.methods.balanceOf(fromAddress).call().then(web3.utils.toBN)];\r\n                    case 3:\r\n                        assetBalance = _a.sent();\r\n                        needAssetBalance = amount.add(fee.assetFee);\r\n                        // needBalance > assetBalance\r\n                        if (needAssetBalance.gt(assetBalance)) {\r\n                            throw Exception.InsufficientBalanceToken;\r\n                        }\r\n                        // fee.minerFee > coinBalance\r\n                        if (fee.minerFee.gt(coinBalance)) {\r\n                            throw Exception.InsufficientBalanceCoin;\r\n                        }\r\n                        return [4 /*yield*/, erc20Token.methods.allowance(fromAddress, config_1.Configure.hostCenterAddress).call().then(web3.utils.toBN)];\r\n                    case 4:\r\n                        allowance = _a.sent();\r\n                        // needAssetBalance > allowance\r\n                        if (needAssetBalance.gt(allowance)) {\r\n                            throw Exception.InsufficientAllowance;\r\n                        }\r\n                        return [4 /*yield*/, this._routeServices.getPortContracts(toChain).then(function (c) { return c[0]; })];\r\n                    case 5:\r\n                        portContract = _a.sent();\r\n                        centerContractInstance = new web3.eth.Contract(config_1.BridgeCenterContract.abi, config_1.Configure.hostCenterAddress);\r\n                        method = centerContractInstance.methods.brunToBridge(fromToken.contractAddress, toChain.toBytes32(), toAddress, amount);\r\n                        return [4 /*yield*/, method.call({ from: fromAddress, value: fee.minerFee })\r\n                                .catch(function (error) {\r\n                                emitter.emit('error', error);\r\n                            })];\r\n                    case 6:\r\n                        callSuccessed = _a.sent();\r\n                        if (callSuccessed) {\r\n                            method.send({ from: fromAddress, value: fee.minerFee, gas: 1000000 })\r\n                                .on('confirmation', function (receipt) {\r\n                                emitter.emit('confirmation', receipt);\r\n                            })\r\n                                .once('transactionHash', function (hash) {\r\n                                emitter.emit('transactionHash', hash);\r\n                                observer = new ApproveStateObserver(portContract, hash);\r\n                                observer.start(emitter);\r\n                            })\r\n                                .once('receipt', function (receipt) {\r\n                                emitter.emit('receipt', receipt);\r\n                            })\r\n                                .once('error', function (error) {\r\n                                emitter.emit('error', error);\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 转入链上主币\r\n     */\r\n    SDK.prototype._transferIntoMainCoin = function (provider, fromToken, fromAddress, toAddress, amount, emitter) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var web3, fee, assetBalance, needBalance, route, portContract, observer, method, callSuccessed;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        web3 = new web3_1.default(provider);\r\n                        return [4 /*yield*/, this.calculationIntoFee(fromToken, amount)];\r\n                    case 1:\r\n                        fee = _a.sent();\r\n                        return [4 /*yield*/, web3.eth.getBalance(fromAddress).then(web3.utils.toBN)];\r\n                    case 2:\r\n                        assetBalance = _a.sent();\r\n                        needBalance = amount.add(fee.assetFee).add(fee.minerFee);\r\n                        // needBalance > assetBalance\r\n                        if (needBalance.gt(assetBalance)) {\r\n                            throw Exception.InsufficientBalanceCoin;\r\n                        }\r\n                        return [4 /*yield*/, this._routeServices.getEntranceRoute(fromToken.chainIdentifier, fromToken.contractAddress)];\r\n                    case 3:\r\n                        route = _a.sent();\r\n                        portContract = new web3.eth.Contract(config_1.BridgePortContract.abi, route.chainPortContract);\r\n                        method = portContract.methods.transferToBridge(fromToken.contractAddress, toAddress, amount);\r\n                        return [4 /*yield*/, method.call({ from: fromAddress, value: needBalance })\r\n                                .catch(function (error) {\r\n                                emitter.emit('error', error);\r\n                            })];\r\n                    case 4:\r\n                        callSuccessed = _a.sent();\r\n                        if (callSuccessed) {\r\n                            method.send({ from: fromAddress, value: needBalance })\r\n                                .on('confirmation', function (receipt) {\r\n                                emitter.emit('confirmation', receipt);\r\n                            })\r\n                                .once('transactionHash', function (hash) {\r\n                                emitter.emit('transactionHash', hash);\r\n                                observer = new ApproveStateObserver(_this._centerContract, hash);\r\n                                observer.start(emitter);\r\n                            })\r\n                                .once('receipt', function (receipt) {\r\n                                emitter.emit('receipt', receipt);\r\n                            })\r\n                                .once('error', function (error) {\r\n                                emitter.emit('error', error);\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 转入ERC20系列代币\r\n     */\r\n    SDK.prototype._transferIntoERC20Token = function (provider, fromToken, fromAddress, toAddress, amount, emitter) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var web3, erc20Token, fee, coinBalance, assetBalance, needAssetBalance, route, allowance, portContract, observer, method, callSuccessed;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        web3 = new web3_1.default(provider);\r\n                        erc20Token = new web3.eth.Contract(config_1.ERC20Contract.abi, fromToken.contractAddress);\r\n                        return [4 /*yield*/, this.calculationIntoFee(fromToken, amount)];\r\n                    case 1:\r\n                        fee = _a.sent();\r\n                        return [4 /*yield*/, web3.eth.getBalance(fromAddress).then(web3.utils.toBN)];\r\n                    case 2:\r\n                        coinBalance = _a.sent();\r\n                        return [4 /*yield*/, erc20Token.methods.balanceOf(fromAddress).call().then(web3.utils.toBN)];\r\n                    case 3:\r\n                        assetBalance = _a.sent();\r\n                        needAssetBalance = amount.add(fee.assetFee);\r\n                        // needBalance > assetBalance\r\n                        if (needAssetBalance.gt(assetBalance)) {\r\n                            throw Exception.InsufficientBalanceToken;\r\n                        }\r\n                        // fee.minerFee > coinBalance\r\n                        if (fee.minerFee.gt(coinBalance)) {\r\n                            throw Exception.InsufficientBalanceCoin;\r\n                        }\r\n                        return [4 /*yield*/, this._routeServices.getEntranceRoute(fromToken.chainIdentifier, fromToken.contractAddress)];\r\n                    case 4:\r\n                        route = _a.sent();\r\n                        return [4 /*yield*/, erc20Token.methods\r\n                                .allowance(fromAddress, route.chainPortContract).call()\r\n                                .then(web3.utils.toBN)];\r\n                    case 5:\r\n                        allowance = _a.sent();\r\n                        // needAssetBalance > allowance\r\n                        if (needAssetBalance.gt(allowance)) {\r\n                            throw Exception.InsufficientAllowance;\r\n                        }\r\n                        portContract = new web3.eth.Contract(config_1.BridgePortContract.abi, route.chainPortContract);\r\n                        method = portContract.methods.transferToBridge(fromToken.contractAddress, toAddress, amount);\r\n                        return [4 /*yield*/, method.call({ from: fromAddress, value: fee.minerFee })\r\n                                .catch(function (error) {\r\n                                emitter.emit('error', error);\r\n                            })];\r\n                    case 6:\r\n                        callSuccessed = _a.sent();\r\n                        if (callSuccessed) {\r\n                            method.send({ from: fromAddress, value: fee.minerFee })\r\n                                .on('confirmation', function (receipt) {\r\n                                emitter.emit('confirmation', receipt);\r\n                            })\r\n                                .once('transactionHash', function (hash) {\r\n                                emitter.emit('transactionHash', hash);\r\n                                observer = new ApproveStateObserver(_this._centerContract, hash);\r\n                                observer.start(emitter);\r\n                            })\r\n                                .once('receipt', function (receipt) {\r\n                                emitter.emit('receipt', receipt);\r\n                            })\r\n                                .once('error', function (error) {\r\n                                emitter.emit('error', error);\r\n                            });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SDK.prototype._routeListCompelte = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        if (!(this._rouoteList == null)) return [3 /*break*/, 2];\r\n                        _a = this;\r\n                        return [4 /*yield*/, this._routeServices.getRoutesList()];\r\n                    case 1:\r\n                        _a._rouoteList = _b.sent();\r\n                        _b.label = 2;\r\n                    case 2: return [2 /*return*/, this._rouoteList];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SDK;\r\n}());\r\nexports.SDK = SDK;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Route = void 0;\r\nvar config_1 = require(\"../config/config\");\r\nvar Route;\r\n(function (Route) {\r\n    var ChainIdentifier = /** @class */ (function () {\r\n        function ChainIdentifier(value) {\r\n            this.value = value;\r\n        }\r\n        ChainIdentifier.parse = function (chainName) {\r\n            switch (chainName) {\r\n                case 'ethereum': return this.ethereum;\r\n                case 'heco': return this.heco;\r\n                case 'bnb': return this.bnb;\r\n                case 'host': return this.host;\r\n            }\r\n            throw \"Unable to parse '\" + chainName + \"'\";\r\n        };\r\n        ChainIdentifier.decode = function (chainIdHex) {\r\n            if (ChainIdentifier.ethereum.value == chainIdHex) {\r\n                return ChainIdentifier.ethereum;\r\n            }\r\n            else if (ChainIdentifier.heco.value == chainIdHex) {\r\n                return ChainIdentifier.heco;\r\n            }\r\n            else if (ChainIdentifier.bnb.value == chainIdHex) {\r\n                return ChainIdentifier.bnb;\r\n            }\r\n            else if (ChainIdentifier.host.value == chainIdHex) {\r\n                return ChainIdentifier.host;\r\n            }\r\n            throw \"Unable to decode '\" + chainIdHex + \"'\";\r\n        };\r\n        ChainIdentifier.prototype.chianName = function () {\r\n            if (this.equal(ChainIdentifier.ethereum)) {\r\n                return 'ethereum';\r\n            }\r\n            else if (this.equal(ChainIdentifier.heco)) {\r\n                return 'heco';\r\n            }\r\n            else if (this.equal(ChainIdentifier.bnb)) {\r\n                return 'bnb';\r\n            }\r\n            else if (this.equal(ChainIdentifier.host)) {\r\n                return 'host';\r\n            }\r\n            else {\r\n                return 'unkown';\r\n            }\r\n        };\r\n        ChainIdentifier.prototype.equal = function (other) {\r\n            return this.value.toLowerCase() == other.value.toLowerCase();\r\n        };\r\n        ChainIdentifier.prototype.toBytes32 = function () {\r\n            return this.value;\r\n        };\r\n        ChainIdentifier.prototype.toString = function () {\r\n            return this.value;\r\n        };\r\n        ChainIdentifier.ethereum = new ChainIdentifier('0xc2e8f644f9552ee96d7e42879092234f30d7bdd58babf5345f2dd5eb2847ac4c');\r\n        ChainIdentifier.heco = new ChainIdentifier('0xa6aa6843ee0343fb2d35852e2925d750077f20394c8193a29e68c6ccb0ece7a6');\r\n        ChainIdentifier.bnb = new ChainIdentifier('0xe1430158eac8c4aa6a515be5ef2c576a7a9559adbd0c276cd9573854e0473494');\r\n        ChainIdentifier.host = new ChainIdentifier('0x0000000000000000000000000000000000000000000000000000000000000000');\r\n        return ChainIdentifier;\r\n    }());\r\n    Route.ChainIdentifier = ChainIdentifier;\r\n    var Services = /** @class */ (function () {\r\n        function Services() {\r\n            this.web3 = config_1.Configure.web3Of(ChainIdentifier.host);\r\n            this.contract = new this.web3.eth.Contract(config_1.BridgeCenterContract.abi, config_1.Configure.hostCenterAddress);\r\n        }\r\n        Services.prototype.getEntranceRoute = function (fromChain, fromToken) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var response;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.contract.methods.getEntranceRoute(fromChain.toBytes32(), fromToken).call()];\r\n                        case 1:\r\n                            response = _a.sent();\r\n                            return [2 /*return*/, {\r\n                                    chainIdentifier: new ChainIdentifier(response.chainIdentifier),\r\n                                    chainPortContract: response.chainPortContract,\r\n                                    chainTokenContract: response.chainTokenContract,\r\n                                    anchorToken: response.anchorToken\r\n                                }];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Services.prototype.getRouteTotalCount = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var count;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.contract.methods.getRouteTotalCount().call()];\r\n                        case 1:\r\n                            count = _a.sent();\r\n                            return [2 /*return*/, Number(count)];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        // 获取对应链配置的港口合约\r\n        Services.prototype.getRoutesList = function (identifier) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var totalCount, response, routes, i, chainId;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getRouteTotalCount()];\r\n                        case 1:\r\n                            totalCount = _a.sent();\r\n                            return [4 /*yield*/, this.contract.methods.getRoutesRange(0, totalCount).call()];\r\n                        case 2:\r\n                            response = _a.sent();\r\n                            routes = new Array();\r\n                            for (i = 0; i < totalCount; i++) {\r\n                                chainId = new ChainIdentifier(response.chainIdentifier[i]);\r\n                                if (identifier == null || chainId.equal(identifier)) {\r\n                                    routes.push({\r\n                                        chainIdentifier: new ChainIdentifier(response.chainIdentifier[i]),\r\n                                        chainPortContract: response.chainPortContract[i],\r\n                                        chainTokenContract: response.chainTokenContract[i],\r\n                                        anchorToken: response.anchorToken[i]\r\n                                    });\r\n                                }\r\n                            }\r\n                            return [2 /*return*/, routes];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        Services.prototype.getPortContractAddress = function (identifier) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var list, portList, portContracts;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getRoutesList(identifier)];\r\n                        case 1:\r\n                            list = _a.sent();\r\n                            portList = new Array();\r\n                            portContracts = new Array();\r\n                            list.forEach(function (route) {\r\n                                if (!portList.includes(route.chainPortContract)) {\r\n                                    portList.push(route.chainPortContract);\r\n                                    portContracts.push(route.chainPortContract);\r\n                                }\r\n                            });\r\n                            return [2 /*return*/, portContracts];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        // 获取对应链的港口合约,一般来说对应的一条链只有一个港口合约\r\n        Services.prototype.getPortContracts = function (identifier) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var list, portList, portContracts, web3;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.getRoutesList(identifier)];\r\n                        case 1:\r\n                            list = _a.sent();\r\n                            portList = new Array();\r\n                            portContracts = new Array();\r\n                            web3 = config_1.Configure.web3Of(identifier);\r\n                            list.forEach(function (route) {\r\n                                if (!portList.includes(route.chainPortContract)) {\r\n                                    portList.push(route.chainPortContract);\r\n                                    portContracts.push(new web3.eth.Contract(config_1.BridgePortContract.abi, route.chainPortContract));\r\n                                }\r\n                            });\r\n                            return [2 /*return*/, portContracts];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        return Services;\r\n    }());\r\n    Route.Services = Services;\r\n})(Route = exports.Route || (exports.Route = {}));\r\n","/*eslint-disable*/\r\nimport {message} from 'antd';\r\nimport Web3 from 'web3';\r\nimport {Route} from '../sdk/bin/routes/routes';\r\nimport {SDK} from '../sdk/bin/main';\r\nimport Contracts from './contracts.json';\r\n\r\nconst url = window.location.protocol;\r\n// const haloHost = url=='https:'?'https://nodes.halo.land':'http://nodes.halo.land' \r\nconst haloHost = 'http://alpha.daison.com.cn:3000';\r\nconst MAIN_ADDRESS = '0x29591Ee7A1080855bF61D72Bc5780C133d412D5D';\r\n\r\nconst callWeb3:Web3 = new Web3(new Web3.providers.HttpProvider(haloHost));\r\nconst sendWeb3:Web3 = new Web3(window.ethereum);\r\n\r\ninterface ForContracts{\r\n    [key: string]:any\r\n}\r\ninterface KeyContracts{\r\n    [key: string]:any\r\n}\r\n\r\n// 需要定义接口说明类型才能将其进行key的赋值,否则会报错\r\nconst keys:string[] = Object.keys(Contracts), \r\n      callContracts:ForContracts = {}, \r\n      sendContracts:ForContracts = {},\r\n      keyStract:KeyContracts = Contracts;\r\n\r\nfor (const key of keys) {\r\n    callContracts[key] = new callWeb3.eth.Contract(keyStract[key].abi, keyStract[key].address);\r\n    sendContracts[key] = new sendWeb3.eth.Contract(keyStract[key].abi, keyStract[key].address);\r\n};\r\n\r\nexport { sendWeb3, callWeb3, callContracts, sendContracts,haloHost,MAIN_ADDRESS };\r\n\r\n// 生成节点\r\nexport function sdkWay(){\r\n    SDK.configure({\r\n        \"providers\": {\r\n            \"host\": haloHost,   //ws://182.160.13.160:1281  ws://192.168.31.192:10000\r\n            \"bnb\": \"https://bsc-dataseed1.binance.org\" //ws://192.168.31.192:10001\r\n        },\r\n        \"center\": MAIN_ADDRESS //0x56F21C096c7Fdfee48491FF15cDc0447B0494BeB\r\n    });\r\n\r\n    return new SDK();\r\n}\r\n\r\n// 定义链数据\r\nexport function chainListData(){\r\n    let data = [\r\n        {\r\n            img: '../assets/images/m-bianBig.png',\r\n            text: 'Binance Smart Chain Network',\r\n            name: 'BSC',\r\n            chainID: 56,\r\n            hash: '0x0d21840abff46b96c84b2ac9e10e4f5cdaeb5693cb665db62a2f3b02d2d57b5b',\r\n            Identifier: Route.ChainIdentifier.bnb,\r\n            index: 1\r\n        },\r\n        {\r\n            img: '../assets/images/halo@2x.png',\r\n            text: 'DT Network',\r\n            name: 'DT',\r\n            chainID: 3000,\r\n            hash: '0xac441e74271f92eafb8be0783c17151d342597c042d6635a89db9bd33c7c646e',\r\n            Identifier: Route.ChainIdentifier.host,\r\n            index: 2\r\n        }\r\n    ]\r\n    return data;\r\n}\r\n\r\n\r\n// 遍历增加图片\r\nexport function supportedAssetsOfAdd(chainlist:any,supportedAssets:any){\r\n    supportedAssets.forEach((item:any,index:number)=>{\r\n        if(chainlist[0].chainID == 56){\r\n            if(item.contractAddress.toLowerCase() == \"0x55d398326f99059ff775485246999027b3197955\".toLowerCase()){\r\n                item.img = 'assets/chin/usdt@2x.png';\r\n            }\r\n            else if(item.contractAddress.toLowerCase() == \"0x2170ed0880ac9a755fd29b2688956bd959f933f8\".toLowerCase()){ \r\n                item.img = 'assets/chin/eth@2x.png'\r\n            }else if(item.contractAddress.toLowerCase() == \"0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d\".toLowerCase()){\r\n                item.img = 'assets/chin/usdc@2x.png'\r\n            }else if(item.contractAddress.toLowerCase() == \"0x41515885251e724233c6cA94530d6dcf3A20dEc7\".toLowerCase()){\r\n                item.symbol = 'HO';\r\n                item.img = 'assets/chin/hor@2x.png'\r\n            }else if(!item.name && item.contractAddress == \"0x8888888888888888888888888888888888888888\" ){\r\n                item.name = 'BNB';\r\n                item.symbol = 'BNB';\r\n                item.img = 'assets/chin/bnb@2x.png';\r\n            }\r\n        }else if(chainlist[0].chainID == 3000){\r\n            if(item.contractAddress.toLowerCase() == \"0xF0Ffd60283d919F853aC3b51EFFb08D769aB44AD\".toLowerCase()){\r\n                item.img = 'assets/chin/usdt@2x.png';\r\n            }else if(item.contractAddress.toLowerCase() == \"0xFb64EadC5e4Def65C63A9eA66Ad76545E9FcCFbc\".toLowerCase()){ \r\n                item.img = 'assets/chin/eth@2x.png'\r\n            }else if(item.contractAddress.toLowerCase() == \"0xaF7F801f92a7654E2402b3f634b384687B65762B\".toLowerCase()){\r\n                item.img = 'assets/chin/usdc@2x.png'\r\n            }else if(item.contractAddress.toLowerCase() == \"0xe7463A410F94127B7f4D3e7B882b4BF5d2011eEd\".toLowerCase()){\r\n                // item.symbol = 'HO';\r\n                item.img = 'assets/chin/bnb@2x.png';\r\n            }else if(!item.name && item.contractAddress == \"0x8888888888888888888888888888888888888888\" ){\r\n                item.name = 'HO';\r\n                item.symbol = 'HO';\r\n                item.img = 'assets/chin/hor@2x.png'\r\n            }\r\n        }\r\n        item.index = index;\r\n    })\r\n    // supportedAssets\r\n\r\n    return supportedAssets.filter((item:any)=> item.contractAddress.toLowerCase() != \"0x2170Ed0880ac9A755fd29B2688956BD959F933F8\".toLowerCase() && item.contractAddress.toLowerCase() != \"0xFb64EadC5e4Def65C63A9eA66Ad76545E9FcCFbc\".toLowerCase());\r\n}\r\n\r\n// 提示\r\nexport function messageWay(val:string,msg:string){\r\n    let styles = {\r\n        marginTop: '28vh',\r\n        // marginLeft: window.isMobile?'240px':''\r\n    }\r\n    if(msg == 'success'){\r\n        message.success({\r\n            content: val,\r\n            key:'id_1', //可以通过唯一的 key 来更新loading的状态，否则会弹出两个框。\r\n            duration: 2,\r\n            style: styles\r\n        });\r\n    }else if(msg == 'error'){\r\n        message.error({\r\n            content: val,\r\n            duration: 1.5,\r\n            key:'id_1',\r\n            style: styles\r\n        });\r\n    }else if(msg == 'loading'){\r\n        message.loading({\r\n            content: val,\r\n            key:'id_1',\r\n            duration: 100,\r\n            style: styles\r\n        });\r\n    }\r\n}\r\n\r\nexport function convertAmount(amountText:any, decimas:any) {\r\n    let reg = /^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$/\r\n    \r\n    let parts = amountText.split('.');\r\n    if (!reg.test(amountText)) {\r\n        messageWay('Please enter the correct number','error') //请输入正确的数字\r\n        throw 'Invaild Amount String';\r\n    }\r\n\r\n    let intergralPart = parts[0];\r\n    let floatPart = parts[1];\r\n    if (floatPart == undefined) {\r\n        floatPart= '';\r\n    }\r\n    if (floatPart.length > decimas) {\r\n        floatPart = floatPart.slice(0, decimas);\r\n    }\r\n\r\n    let toBN = sendWeb3.utils.toBN;\r\n\r\n    let ret = toBN(intergralPart + floatPart).mul(\r\n        toBN('10').pow(toBN(parseInt(decimas) - floatPart.length))\r\n    )\r\n\r\n    console.log(`Origin:${amountText} -> ${ret.toString()}`);\r\n    return ret.toString();\r\n}\r\n\r\n//向后补0\r\nexport function supplementWay(val:string){\r\n    let value = parseFloat(val);\r\n    let xsd = value.toString().split( \".\" );\r\n    let str : string = '';\r\n    if (xsd.length == 1){\r\n        str = value.toString()+ \".000000\" ;\r\n        return str;\r\n    }\r\n    if (xsd.length > 1){\r\n        if (xsd[1].length < 2){\r\n            str = value.toString() + \"00000\";\r\n        }else if (xsd[1].length < 3){\r\n            str = value.toString() + \"0000\";\r\n        }else if (xsd[1].length < 4){\r\n            str = value.toString() + \"000\";\r\n        }else if (xsd[1].length < 5){\r\n            str = value.toString() + \"00\";\r\n        }else if (xsd[1].length < 6){\r\n            str = value.toString() + \"0\";\r\n        }else if (xsd[1].length >= 6){\r\n            str = value.toString();\r\n        }\r\n        return str;\r\n    }\r\n}\r\n\r\n//向后补两0\r\nexport function supplementWayTwo(val:string){\r\n    let value:number = parseFloat(val);\r\n    let xsd = value.toString().split( \".\" );\r\n    let str : string = '';\r\n    if (xsd.length == 1){\r\n        str = value.toString()+ \".00\" ;\r\n        return str;\r\n    }\r\n    if (xsd.length > 1){\r\n        if (xsd[1].length < 2){\r\n            str = value.toString() + \"0\";\r\n        }\r\n        return str;\r\n    }\r\n}\r\n\r\nexport function setSessionStorage(key:any, value:any) {\r\n    sessionStorage.setItem(`${key}`, value);\r\n}\r\n\r\nexport function getSessionStorage(key:string) {\r\n    return sessionStorage.getItem(`${key}`);\r\n}\r\n\r\nexport function setlocalStorage(key:any, value:any) {\r\n    localStorage.setItem(`${key}`, value);\r\n}\r\n\r\nexport function getlocalStorage(key:any) {\r\n    return localStorage.getItem(`${key}`);\r\n}","import React,{Component} from 'react';\r\nimport { Select, Button, Input} from 'antd';\r\nimport {\r\n    messageWay,\r\n    supplementWay,\r\n    supportedAssetsOfAdd,\r\n    convertAmount,\r\n    sdkWay,\r\n    sendWeb3,\r\n    setSessionStorage\r\n} from 'utils/utils'\r\nimport './Home.scss'\r\n\r\nimport { Route } from '../../sdk/bin/routes/routes';\r\nimport { ERC20Contract } from '../../sdk/bin/config/config';\r\n// import { store } from 'store/index'\r\n\r\nconst sdk = sdkWay();\r\nconst { Option } = Select;\r\nvar fromTokens:any, // tokenBlog\r\n    allowance:any, // 已授权额度\r\n    isERC20Token:any,\r\n    erc20Token:any; // new币合约\r\n\r\ninterface NuList{\r\n    [key: string]:any\r\n}\r\n\r\nexport default class Home extends Component<any, any> {\r\n    constructor(props:any) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            selectName: -1,\r\n            isConnect: false, //当前是否连接\r\n            toAddress: '', //需要转入的地址\r\n            numValue: '', // 当前输入数量\r\n            fromTokens: null, // 当前选中的代币\r\n            erc20Token: null, //合约\r\n            isShade: false, //控制遮罩\r\n            moneyList: [], //币\r\n            mainSelect: false, //判断是否选中的是主币\r\n            serviceCharge: '0', //计算手续费\r\n            mainBalance: '0', //主币余额\r\n            balance: '0', // 当前币余额\r\n            btnLoadings: false, //兑换/授权按钮的loading效果\r\n            btnText: 2, //判断显示授权还是兑换\r\n            currency: '', //代币符号\r\n            storeAddress:window.$address,\r\n            storeisMobile:window.isMobile,\r\n            chainlist: [\r\n                //链\r\n                {\r\n                    img: 'assets/images/m-bianBig.png',\r\n                    text: 'Binance Smart Chain Network',\r\n                    name: 'BSC',\r\n                    chainID: 56,\r\n                    hash: '0x0d21840abff46b96c84b2ac9e10e4f5cdaeb5693cb665db62a2f3b02d2d57b5b',\r\n                    Identifier: Route.ChainIdentifier.bnb,\r\n                    index: 1\r\n                },\r\n                {\r\n                    img: 'assets/images/halo@2x.png',\r\n                    text: 'DT Network',\r\n                    name: 'DT',\r\n                    chainID: 3000,\r\n                    hash: '0xac441e74271f92eafb8be0783c17151d342597c042d6635a89db9bd33c7c646e',\r\n                    Identifier: Route.ChainIdentifier.host,\r\n                    index: 2\r\n                }\r\n            ]\r\n        };\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        //页面渲染成功后\r\n        if(window.ethereum){\r\n            this.init();\r\n        }\r\n    };\r\n\r\n    componentWillUnmount = () => {\r\n        this.setState = (state,callback)=>{\r\n          return;\r\n        };\r\n    }\r\n\r\n    init = async () => {\r\n        // console.log(store.getState())\r\n        // console.log(this.state.storeAddress,this.state.storeisMobile);\r\n        let chainID = await sendWeb3.eth.getChainId();\r\n        let blockHash = await sendWeb3.eth.getBlock(0);\r\n        let data:any[] = [];\r\n        \r\n        // 当前连接的是哪一个节点，哪一个就在左边 \r\n        this.state.chainlist.forEach((item:any, index:number) => {\r\n            if (item.chainID == chainID && item.hash == blockHash.hash) {\r\n                if (index == 1) {\r\n                    data[0] = this.state.chainlist[index];\r\n                    data[1] = this.state.chainlist[0];\r\n                }\r\n            }\r\n        });\r\n\r\n        if (data.length > 0) {\r\n            this.setState({\r\n                chainlist: data\r\n            });\r\n        }\r\n\r\n        await this.chainIDConnect();\r\n        await this.supportedAssetsOf();\r\n        await this.getBalanceMain();\r\n    };\r\n\r\n    //当前链是否连接\r\n    chainIDConnect = async () => {\r\n        let chainID = await sendWeb3.eth.getChainId();\r\n        let blockHash = await sendWeb3.eth.getBlock(0);\r\n        console.log(chainID);\r\n        \r\n        if (\r\n            chainID == this.state.chainlist[0].chainID &&\r\n            blockHash.hash == this.state.chainlist[0].hash &&\r\n            this.state.storeAddress\r\n        ) {\r\n            this.setState({ isConnect: true });\r\n        } else {\r\n            this.setState({ isConnect: false });\r\n        }\r\n    };\r\n\r\n    // 获取该链代币\r\n    supportedAssetsOf = async () => {\r\n        if (!this.state.isConnect) {\r\n            this.setState({ moneyList: [] });\r\n            return;\r\n        }\r\n        try{\r\n            let supportedAssets = await sdk.supportedAssetsOf(this.state.chainlist[0].Identifier);\r\n            this.setState({\r\n                moneyList: supportedAssetsOfAdd(this.state.chainlist, supportedAssets)\r\n            });\r\n            console.log(this.state.moneyList);\r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n    };\r\n\r\n    approveToken = async (val:string) => {\r\n        //授权\r\n        // 获取对应链上的港口操作合约，授权是需要像此合约授权的\r\n        let opreator;\r\n        if (val == 'into') {\r\n            opreator = await sdk.transferIntoOperator(this.state.chainlist[0].Identifier);\r\n        } else if (val == 'leave') {\r\n            opreator = await sdk.transferLeaveOperator();\r\n        }\r\n\r\n        // 授权\r\n        await erc20Token.methods\r\n            .approve(\r\n                opreator,\r\n                sendWeb3.utils.toWei('1000000') //sendWeb3.utils.toWei(sendWeb3.utils.toBN('1000000'))\r\n            )\r\n            .send({\r\n                from: this.state.storeAddress\r\n            })\r\n            .on('transactionHash', (hash:any) => {\r\n                messageWay(window.t('bridgePage.message1'), 'loading');\r\n                this.setState({ btnLoadings: true });\r\n            })\r\n            .on('receipt', (res:any) => {\r\n                messageWay(window.t('bridgePage.message2'), 'success');\r\n                this.setState({ btnLoadings: false });\r\n                this.isApprove();\r\n            })\r\n            .on('error', (err:any) => {\r\n                messageWay(window.t('bridgePage.message3'), 'error');\r\n            }); //,chainId:1\r\n    };\r\n\r\n    doTransferInto = async () => {\r\n        // 转到Ho\r\n        if (!this.isMessage()) {\r\n            return;\r\n        }\r\n        //不为主币的时候并且小于转出数量的时候需要授权\r\n        if (\r\n            allowance != -1 &&\r\n            (parseFloat(allowance) < parseFloat(this.state.numValue) || parseFloat(allowance) == 0)\r\n        ) {\r\n            await this.approveToken('into');\r\n        }\r\n\r\n        try {\r\n            sdk.doTransferInto(\r\n                window.ethereum,\r\n                fromTokens,\r\n                this.state.storeAddress,\r\n                this.state.toAddress,\r\n                sendWeb3.utils.toBN(convertAmount(this.state.numValue, fromTokens.decimals))\r\n            )\r\n                .once('verifyStateChanged', state => {\r\n                    console.log(`verifyStateChanged: ${state.verifyed} verified`);\r\n                })\r\n                .once('verifyStateSuccessed', state => {\r\n                    console.log(`verifyStateSuccessed: ${state.verifyed} verified`);\r\n                    messageWay(window.t('bridgePage.message4'), 'success');\r\n                    this.successUpdate();\r\n                    this.setState({ btnLoadings: false });\r\n                    this.isApprove();\r\n                    this.getBalanceAndAllowance('');\r\n                })\r\n                .once('transactionHash', hash => {\r\n                    messageWay(window.t('bridgePage.message5'), 'loading');\r\n                    this.setState({ btnLoadings: true });\r\n                })\r\n                .once('receipt', receipt => {\r\n                    console.log('receipted: ');\r\n                    console.log(receipt);\r\n                })\r\n                .on('error', reject => {\r\n                    console.log(reject);\r\n                    messageWay(window.t('bridgePage.message6'), 'error');\r\n                    this.successUpdate();\r\n                    this.setState({ btnLoadings: false });\r\n                });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    doTransferLeave = async () => {\r\n        // 转到BSC\r\n        if (!this.isMessage()) {\r\n            return;\r\n        }\r\n        //不为主币的时候并且小于转出数量的时候需要授权\r\n        if (allowance != -1 && parseFloat(allowance) < parseFloat(this.state.numValue)) {\r\n            await this.approveToken('leave');\r\n        }\r\n        console.log(\r\n            window.ethereum,\r\n            fromTokens,\r\n            this.state.storeAddress,\r\n            this.state.chainlist[1].Identifier,\r\n            this.state.toAddress,\r\n            sendWeb3.utils.toBN(convertAmount(this.state.numValue, fromTokens.decimals))\r\n        )\r\n\r\n        try {\r\n            sdk.doTransferLeave(\r\n                window.ethereum,\r\n                fromTokens,\r\n                this.state.storeAddress,\r\n                this.state.chainlist[1].Identifier,\r\n                this.state.toAddress,\r\n                sendWeb3.utils.toBN(convertAmount(this.state.numValue, fromTokens.decimals))\r\n            )\r\n                .once('verifyStateChanged', state => {\r\n                    console.log(`verifyStateChanged: ${state.verifyed} verified`);\r\n                })\r\n                .once('verifyStateSuccessed', state => {\r\n                    console.log(`verifyStateSuccessed: ${state.verifyed} verified`);\r\n                    messageWay(window.t('bridgePage.message4'), 'success');\r\n                    this.successUpdate();\r\n                    this.setState({ btnLoadings: false });\r\n                    this.isApprove();\r\n                    this.getBalanceAndAllowance('');\r\n                })\r\n                .once('transactionHash', hash => {\r\n                    messageWay(window.t('bridgePage.message5'), 'loading');\r\n                    this.setState({ btnLoadings: true });\r\n                })\r\n                .once('receipt', receipt => {\r\n                    console.log('receipted: ');\r\n                    console.log(receipt);\r\n                })\r\n                .on('error', reject => {\r\n                    console.log(reject);\r\n                    messageWay(window.t('bridgePage.message6'), 'error');\r\n                    console.log('出错了！');\r\n                    this.successUpdate();\r\n                    this.setState({ btnLoadings: false });\r\n                });\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    selectChange = async (val:number) => {\r\n        let textVal = '';\r\n        this.state.moneyList.forEach((item:any, index:number) => {\r\n            if (val == index) {\r\n                fromTokens = item;\r\n                textVal = item.symbol;\r\n                erc20Token = new sendWeb3.eth.Contract(ERC20Contract.abi, item.contractAddress); //连接对应的代币\r\n            }\r\n        });\r\n\r\n        this.setState({\r\n            selectName: val\r\n        });\r\n        this.successUpdate();\r\n        this.getBalanceAndAllowance(textVal);\r\n    };\r\n\r\n    getBalanceAndAllowance = async (textVal:string) => {\r\n        //获取授权额度和代币余额\r\n        isERC20Token = await sdk.isERC20Token(fromTokens); //true 为代币，false为主币\r\n\r\n        if (isERC20Token) {\r\n            //代币需要获取授权e度\r\n            let opreator;\r\n            if (this.state.chainlist[0].index == 1) {\r\n                console.log('into');\r\n                opreator = await sdk.transferIntoOperator(this.state.chainlist[0].Identifier);\r\n            } else if (this.state.chainlist[0].index == 2) {\r\n                console.log('leave');\r\n                opreator = await sdk.transferLeaveOperator();\r\n            }\r\n\r\n            allowance = await erc20Token.methods.allowance(this.state.storeAddress, opreator).call();\r\n            let balance = await erc20Token.methods\r\n                .balanceOf(this.state.storeAddress)\r\n                .call({ from: this.state.storeAddress });\r\n            this.setState({\r\n                balance: supplementWay(sendWeb3.utils.fromWei(balance)),\r\n                currency: textVal,\r\n                mainSelect: false\r\n            });\r\n\r\n            this.isApprove();\r\n        } else {\r\n            this.setState({\r\n                balance: supplementWay(this.state.mainBalance),\r\n                btnText: 2,\r\n                currency: textVal,\r\n                mainSelect: true\r\n            });\r\n\r\n            allowance = -1;\r\n        }\r\n        console.log('当前授权额度：' + allowance);\r\n    };\r\n\r\n    getBalanceMain = async () => {\r\n        if(!this.state.storeAddress) return;\r\n        await sendWeb3.eth.getBalance(this.state.storeAddress).then(res => {\r\n            console.log('当前主币余额：' + sendWeb3.utils.fromWei(res));\r\n            this.setState({\r\n                mainBalance: sendWeb3.utils.fromWei(res)\r\n            });\r\n        });\r\n    };\r\n\r\n    isApprove() {\r\n        //是授权还是兑换\r\n        this.setState({\r\n            btnText: parseFloat(this.state.numValue) > this.state.balance ? 1 : 2\r\n        });\r\n    }\r\n\r\n    conversion = () => {\r\n        if (!this.state.isConnect) {\r\n            messageWay(window.t('bridgePage.message7'), 'error');\r\n            return;\r\n        }\r\n        if (parseFloat(this.state.mainBalance) < 0.0001) {\r\n            messageWay(window.t('bridgePage.message8'), 'error');\r\n            return;\r\n        }\r\n\r\n        if (this.state.chainlist[0].index == 1) {\r\n            // 转到Ho\r\n            this.doTransferInto();\r\n        } else if (this.state.chainlist[0].index == 2) {\r\n            // 转到bsc\r\n            this.doTransferLeave();\r\n        }\r\n    };\r\n\r\n    successUpdate() {\r\n        this.setState({\r\n            toAddress: '',\r\n            numValue: ''\r\n        });\r\n    }\r\n\r\n    isMessage() {\r\n        let isNext = true;\r\n        let state = this.state;\r\n        if (state.selectName == -1) {\r\n            messageWay(window.t('bridgePage.message9'), 'error');\r\n            isNext = false;\r\n        } else if (!state.toAddress) {\r\n            messageWay(window.t('bridgePage.message10'), 'error');\r\n            isNext = false;\r\n        } else if (!sendWeb3.utils.isAddress(state.toAddress)) {\r\n            messageWay(window.t('bridgePage.message11'), 'error');\r\n            return;\r\n        } else if (!state.numValue || parseFloat(state.numValue) < 0.01) {\r\n            messageWay(window.t('bridgePage.message12'), 'error');\r\n            isNext = false;\r\n        } else if (parseFloat(state.balance) < 0.01) {\r\n            messageWay(window.t('bridgePage.message13'), 'error');\r\n            isNext = false;\r\n        }\r\n        return isNext;\r\n    }\r\n\r\n    exchange = async () => {\r\n        //点击切换位置\r\n        let list = this.state.chainlist;\r\n        let data = [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            if (i == 0) {\r\n                data[i] = list[1];\r\n            } else if (i == 1) {\r\n                data[i] = list[0];\r\n            }\r\n        }\r\n        this.setState({\r\n            chainlist: data\r\n        });\r\n        await this.chainIDConnect();\r\n        this.supportedAssetsOf();\r\n    };\r\n\r\n    HistoryPage = () => {\r\n        // if(!this.state.isConnect){\r\n        //     messageWay(window.t('bridgePage.message7'), 'error');\r\n        //     return;\r\n        // }\r\n\r\n        // if (!fromTokens) {\r\n        //     messageWay(window.t('bridgePage.message9'), 'error');\r\n        //     return;\r\n        // }\r\n\r\n        setSessionStorage('chainList', JSON.stringify(this.state.chainlist));\r\n        setSessionStorage('moneyList', JSON.stringify(this.state.moneyList));\r\n        // setSessionStorage('fromTokens',JSON.stringify(fromTokens));\r\n\r\n        this.props.history.push({\r\n            pathname: '/history'\r\n            // search: `contractAddress=${fromTokens.contractAddress}`\r\n        });\r\n    };\r\n\r\n\r\n    isShadeWay(val:number) {\r\n        this.setState({\r\n            isShade: true\r\n        });\r\n        setTimeout(() => {\r\n            this.setState({\r\n                isShade: false\r\n            });\r\n        }, val);\r\n    }\r\n\r\n    toAddressOnInput(e:any) {\r\n        this.setState({\r\n            toAddress: e.target.value\r\n        });\r\n    }\r\n\r\n    handleOnInput(e:any) {\r\n        if (isERC20Token) {\r\n            //false为主币\r\n            this.setState({\r\n                btnText: parseFloat(e.target.value) > allowance ? 1 : 2,\r\n                numValue: e.target.value\r\n            });\r\n        } else {\r\n            this.setState({\r\n                btnText: 2,\r\n                numValue: e.target.value\r\n            });\r\n        }\r\n        this.calculationLeaveFee(e.target.value);\r\n    }\r\n\r\n    calculationLeaveFee = async (numValue:any) => {\r\n        if (!fromTokens) {\r\n            return;\r\n        }\r\n        if (this.state.chainlist[0].index == 1) {\r\n            // 转到Ho\r\n            this.setState({\r\n                serviceCharge: 0\r\n            });\r\n        } else if (this.state.chainlist[0].index == 2) {\r\n            // 转到bsc\r\n            this.setState({\r\n                serviceCharge: 0.001\r\n            });\r\n        }\r\n    };\r\n\r\n    complete() {\r\n        if (parseFloat(this.state.balance) < 0.01) {\r\n            messageWay(window.t('bridgePage.message13'), 'error');\r\n            return;\r\n        }  \r\n\r\n        this.setState({\r\n            btnText: parseFloat(this.state.balance) > allowance ? 1 : 2,\r\n            numValue: this.state.balance\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const state = this.state;\r\n        return (\r\n            <div className=\"page\">\r\n                <div className=\"page-title\">\r\n                    {window.t('bridgePage.title')}\r\n                    <div className=\"page-desc\">{window.t('bridgePage.content')}</div>\r\n                </div>\r\n                <div className=\"page-subject\">\r\n                    <div className=\"title_select\">\r\n                        <div className=\"title\">{window.t('bridgePage.text1')}</div>\r\n\r\n                        <Select\r\n                            className=\"selector\"\r\n                            allowClear\r\n                            dropdownClassName=\"dropdownClassName\"\r\n                            placeholder={window.t('bridgePage.text2')}\r\n                            onSelect={this.selectChange}\r\n                        >\r\n                            {state.moneyList.map((item:any, index:number) => {\r\n                                return (\r\n                                    <Option className=\"form-box-view\" value={index} key={index}>\r\n                                        <img className=\"form-box-icon\" src={item.img}></img>\r\n                                        <div className=\"form-box-span\">{item.symbol}</div>\r\n                                    </Option>\r\n                                );\r\n                            })}\r\n                        </Select>\r\n                    </div>\r\n                    \r\n                    <div className=\"transition_view\">\r\n                        <div className=\"trans_start\">\r\n                            <div>{window.t('bridgePage.text3')}</div>\r\n                            <div>{window.t('bridgePage.text4')}</div>\r\n                        </div>\r\n                        <div className=\"trans_deal\">\r\n                            <div className=\"deal_style\">\r\n                                <div className=\"views\">\r\n                                    <img src={state.chainlist[0].img} alt=\"\" />\r\n                                    {state.isConnect ? (\r\n                                        <div className=\"yet\">● {window.t('bridgePage.text5')}</div>\r\n                                    ) : (\r\n                                        <div className=\"no\">● {window.t('bridgePage.text6')}</div>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"desc\">{state.chainlist[0].text}</div>\r\n                            </div>\r\n                            <div className=\"trans_img\" onClick={this.exchange}>\r\n                                <img src={'assets/images/transition_icon.png'} />\r\n                            </div>\r\n                            <div className=\"deal_style\">\r\n                                <div className=\"views\">\r\n                                    <img src={state.chainlist[1].img} alt=\"\" />\r\n                                    {/* <div>● 已连接</div> */}\r\n                                </div>\r\n                                <div className=\"desc\">{state.chainlist[1].text}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"address_view\">\r\n                        <div className=\"name\">{window.t('bridgePage.text7')}</div>\r\n                        <Input\r\n                            className=\"input\"\r\n                            value={state.toAddress}\r\n                            onChange={e => {\r\n                                this.toAddressOnInput(e);\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    \r\n                    <div className=\"shoukuan\">\r\n                        <div>{window.t('bridgePage.text8')}</div>\r\n                        <div style={{ fontSize: '12px' }}>\r\n                            {window.t('bridgePage.text9')} {state.balance}{' '}\r\n                            <span style={{ marginLeft: '5px' }}>{state.currency}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"amount_Collection\">\r\n                        <Input\r\n                            className=\"Collection\"\r\n                            type=\"number\"\r\n                            value={state.numValue}\r\n                            onChange={e => {\r\n                                this.handleOnInput(e);\r\n                            }}\r\n                        />\r\n                        {!state.mainSelect ? (\r\n                            <Button\r\n                            className=\"allbutton\"\r\n                                type=\"primary\"\r\n                                onClick={() => {\r\n                                    this.complete();\r\n                                }}\r\n                            >\r\n                                {window.t('all')}\r\n                            </Button>\r\n                        ) : (\r\n                            ''\r\n                        )}\r\n                    </div>\r\n                    <div className=\"serviceCharge\">\r\n                        {window.t('bridgePage.text10')} {state.serviceCharge}\r\n                    </div>\r\n                    <div className=\"button_view\">\r\n                        <Button\r\n                            type=\"primary\"\r\n                            className=\"button\"\r\n                            onClick={this.conversion}\r\n                            loading={state.btnLoadings}\r\n                        >\r\n                            {state.btnText == 2\r\n                                ? window.t('bridgePage.text11')\r\n                                : window.t('bridgePage.text12')}\r\n                        </Button>\r\n                    </div>\r\n                    \r\n                    <div className=\"lisi_res\" onClick={this.HistoryPage} >{window.t('bridgePage.history.text1')}</div>\r\n                </div>\r\n                {/* 自定义遮罩 */}\r\n                {/* <div className={state.isShade?'shade':''}></div> */}\r\n            </div>\r\n        );\r\n    }\r\n} ","/*eslint-disable*/\r\nimport { Component } from 'react';\r\nimport { Row, Col, message } from 'antd';\r\nimport './History.scss';\r\nimport { ERC20Contract, BridgeCenterContract } from 'sdk/bin/config/config';\r\nimport {\r\n    messageWay,\r\n    sdkWay,\r\n    callWeb3,\r\n    sendWeb3,\r\n    getSessionStorage,\r\n    MAIN_ADDRESS\r\n} from 'utils/utils';\r\nimport { store } from 'store/index'\r\n\r\nconst sdk = sdkWay();\r\n\r\nvar contractToken:any;\r\nvar publicChainArr:any[] = []; //记录当前数据\r\n\r\nexport default class HashrateDetail extends Component<any, any> {\r\n    constructor(props:any) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            detailList: [],\r\n            storeAddress:window.$address,\r\n            storeisMobile:window.isMobile,\r\n            chainList: [],\r\n            showUser: false,\r\n            userAddress: '',\r\n            isMore:false,\r\n            isDisetMore:false,\r\n            identifierList: [\r\n                {\r\n                    img: 'assets/images/m-bianBig.png',\r\n                    text: 'Binance Smart Chain Network',\r\n                    name: 'BSC',\r\n                    index: 1\r\n                },\r\n                {\r\n                    img: 'assets/images/halo@2x.png',\r\n                    text: 'DT Network',\r\n                    name: 'DT',\r\n                    index: 2\r\n                }\r\n            ]\r\n        };\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        this.init();\r\n    };\r\n\r\n    init = async () => {\r\n        let getSissList = getSessionStorage(\"chainList\");\r\n        if(!getSissList) return;\r\n        publicChainArr = JSON.parse(getSissList);\r\n        // console.log(this.props)\r\n        let index = this.props.location.search.indexOf('=');\r\n        let contractAddress = this.props.location.search.slice(index+1);\r\n\r\n        //加载效果\r\n        messageWay(window.t('bridgePage.history.message1'), 'loading');\r\n\r\n        let chainID = await sendWeb3.eth.getChainId();\r\n        let blockHash = await sendWeb3.eth.getBlock(0);\r\n        if(chainID !=  publicChainArr[0].chainID && publicChainArr[0].hash != blockHash.hash){\r\n            this.props.history.goBack();\r\n            let styles = {\r\n                marginTop: '28vh',\r\n            }\r\n            message.loading({\r\n                content: window.t('bridgePage.history.message1'),\r\n                key:'id_1',\r\n                duration: 1,\r\n                style: styles\r\n            });\r\n            return;\r\n        }\r\n\r\n        contractToken = new callWeb3.eth.Contract(BridgeCenterContract.abi, MAIN_ADDRESS);\r\n        let BlockNumber = await callWeb3.eth.getBlockNumber();\r\n        // await this.getAddress();\r\n\r\n        //根据收账人进行记录查询\r\n        this.isGetChain(BlockNumber);\r\n    };\r\n\r\n    isGetChain = (Numbers:number)=>{\r\n        this.setState({\r\n            isDisetMore:true\r\n        })\r\n        if (publicChainArr[0].index == 1) {\r\n            //跨出\r\n            console.log('Bruned')\r\n            this.getHistory('Bruned',Numbers);\r\n        } else if (publicChainArr[0].index == 2) {\r\n            // 跨入\r\n            console.log('Minted')\r\n            this.getHistory('Minted',Numbers);\r\n        }\r\n    }\r\n\r\n    getHistory = async (event:string,Numbers:number) => {\r\n        let NumbersWao = (Numbers - 5000) < 1?0:Numbers - 5000;\r\n\r\n        if(!this.state.storeAddress){    \r\n            messageWay(window.t('bridgePage.history.text12'),'error');\r\n            return;\r\n        }\r\n   \r\n        contractToken.getPastEvents(event, {\r\n            filter: {\r\n                receipt: this.state.storeAddress\r\n            },\r\n            fromBlock: 0\r\n        }).then((events:any)=>{\r\n            //（现在选择HO给自己跨出了一笔，然后查到的是空）\r\n            console.log(events)\r\n            if(events.length > 0){\r\n                this.recordPushWay(events.reverse());\r\n            }else{\r\n                messageWay(window.t('bridgePage.history.message3'),'success');\r\n            }\r\n        })\r\n        // 根据记录进行分页，相见桌面个人记录文档\r\n    };\r\n\r\n    recordPushWay = (events:any) => {\r\n        let chainArr:any[] = [];\r\n        let getSeinList:any = getSessionStorage('moneyList');\r\n        if(!getSeinList) return;\r\n        let moneyList = JSON.parse(getSeinList);\r\n        events.forEach((item:any) => {\r\n            // console.log(this.dateTimeWay(parseInt(item.returnValues.time) * 1000))\r\n            moneyList.forEach((chain:any)=>{\r\n                let chiress = item.returnValues.toChainTokenAddress?item.returnValues.toChainTokenAddress:item.returnValues.anchorToken\r\n                if(chain.contractAddress == chiress){\r\n                    chainArr.push({\r\n                        time:this.dateTimeWay(parseInt(item.returnValues.time) * 1000),\r\n                        amount:sendWeb3.utils.fromWei(item.returnValues.amount),\r\n                        sender:item.returnValues.sender,\r\n                        img1:publicChainArr[0].img,\r\n                        text1:publicChainArr[0].text,\r\n                        img2:publicChainArr[1].img,\r\n                        text2:publicChainArr[1].text,\r\n                        symbol:chain.symbol\r\n                    });\r\n                }\r\n            })\r\n        });\r\n        this.setState({\r\n            isDisetMore:false\r\n        })\r\n        messageWay(window.t('bridgePage.history.text11'),'success')\r\n\r\n        this.setState({\r\n            detailList: chainArr\r\n        });\r\n    };\r\n\r\n    goback = () => {\r\n        this.props.history.goBack(1);\r\n    };\r\n\r\n    dateTimeWay(val:any) {\r\n        let date = new Date(val);\r\n        let y = date.getFullYear();\r\n        let m = date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1;\r\n        let d = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\r\n        let h = date.getHours() < 10 ? '0' + date.getHours() : date.getHours();\r\n        let md = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();\r\n        return y + '-' + m + '-' + d + ' ' + h + ':' + md;\r\n    }\r\n\r\n    render() {\r\n        const { detailList,storeisMobile } = this.state;\r\n        return (\r\n            <div className=\"detail\">\r\n                <div className=\"detail_title\">\r\n                    <span onClick={this.goback}>{window.t('bridgePage.title')}</span> /{' '}\r\n                    <span>{window.t('bridgePage.history.text1')}</span>\r\n                </div>\r\n                {detailList.length > 0 ? (\r\n                    detailList.map((item:any, index:number) => {\r\n                        return (\r\n                            <div className=\"pos_statistics\" key={index}>\r\n                                <Row className=\"statistics_list\">\r\n                                    <Col span={12} className=\"list_view\">\r\n                                        <div>\r\n                                            <div>{item.amount}</div> <span>{item.symbol}</span>\r\n                                        </div>\r\n                                    </Col>\r\n                                    <Col span={12} className=\"list_view complete\">\r\n                                        <button className=\"btn gray\">\r\n                                            {window.t('bridgePage.history.text2')}\r\n                                        </button>\r\n                                        {/* <button className=\"btn red\">进行中</button> */}\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row className=\"statistics_desc\">\r\n                                    <Col span={storeisMobile ? 12 : 6} className=\"desc_p\">\r\n                                        {window.t('bridgePage.history.text3')}\r\n                                    </Col>\r\n                                    <Col span={storeisMobile ? 12 : 18} className=\"desc_num\">\r\n                                        <img src={item.img1} />\r\n                                        {item.text1}\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row className=\"statistics_desc\">\r\n                                    <Col span={storeisMobile ? 12 : 6} className=\"desc_p\">\r\n                                        {window.t('bridgePage.history.text4')}\r\n                                    </Col>\r\n                                    <Col span={storeisMobile ? 12 : 18} className=\"desc_num\">\r\n                                        <img src={item.img2} />\r\n                                        {item.text2}\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row className=\"statistics_desc\">\r\n                                    <Col span={storeisMobile ? 12 : 6} className=\"desc_p\">\r\n                                        {window.t('bridgePage.history.text13')}\r\n                                    </Col>\r\n                                    <Col span={storeisMobile ? 12 : 18} className=\"desc_num\">\r\n                                        {item.sender.slice(0,6) +'...'+ item.sender.slice(-4)}\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row className=\"statistics_desc\">\r\n                                    <Col span={storeisMobile ? 12 : 6} className=\"desc_p\">\r\n                                        {window.t('bridgePage.history.text5')}\r\n                                    </Col>\r\n                                    <Col span={storeisMobile ? 12 : 18} className=\"desc_num\">\r\n                                        {item.time}\r\n                                    </Col>\r\n                                </Row>\r\n                            </div>\r\n                        );\r\n                    })\r\n                ) : (''\r\n                    // <div className=\"pos_statistics\"></div>\r\n                )}\r\n\r\n                <div className=\"more_detail\">\r\n                    <div style={{marginTop:'20px',color:'#888'}}>{window.t('bridgePage.history.text10')}</div>\r\n                    {/* {\r\n                        this.state.isMore?(<div style={{marginTop:'20px',color:'#888'}}>{window.t('bridgePage.history.text10')}</div>):(\r\n                            <Button onClick={()=>{\r\n                                this.isGetChain(publicBlockNumber,1)\r\n                            }} disabled={this.state.isDisetMore}>{window.t('pos.detail.text6')}</Button>\r\n                        )\r\n                    } */}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import Home from '../page/home/Home'\r\nimport History from '../page/history/History'\r\n\r\n\r\ninterface router{\r\n    path:string,\r\n    component:any,\r\n    children?:Array<router>\r\n}\r\n\r\nconst routers:Array<router> = [\r\n    {\r\n        path:'/',\r\n        component:Home\r\n    },\r\n    {\r\n        path:'/history',\r\n        component:History\r\n    }\r\n]\r\n\r\nexport default routers;","import React,{useState,useEffect} from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport './Langage.scss'\r\nimport { Select } from 'antd';\r\nconst { Option } = Select;\r\n// import lang from './lang'\r\n\r\nconst Langage = ()=>{\r\n    const { t, i18n } = useTranslation();\r\n    const handleChange = (value:string) =>{\r\n        localStorage.setItem('lang', value);\r\n        i18n.changeLanguage(value);\r\n    }\r\n\r\n    return(\r\n        <div className=\"langage\">\r\n            <Select defaultValue={localStorage.getItem('lang') == 'zh_CN' ? window.t('chinese') : window.t('english')} style={{ width: 120 }} onChange={handleChange}>\r\n                <Option value=\"zh_CN\">{window.t('chinese')}</Option>\r\n                <Option value=\"EN\">{window.t('english')}</Option>\r\n            </Select>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Langage;","export const INCREMENT = \"INCREMENT\"\r\nexport const INSERTISMOBILE = \"INSERTISMOBILE\"\r\n\r\nexport const incrementAction = {type: INCREMENT, address: ''}\r\nexport const initIsMobile = {type: INSERTISMOBILE, isMobile: false}\r\n\r\ninterface ReduxState{\r\n    address?:String,\r\n    isMobile?:Boolean\r\n}\r\n\r\ninterface Action{\r\n    type: String,\r\n    address: String\r\n}\r\n\r\nconst initData = {\r\n    address: ''\r\n}\r\n\r\ninterface isMobileAction{\r\n    type: String,\r\n    isMobile: Boolean\r\n}\r\n\r\nconst isMobileData = {\r\n    isMobile: false\r\n}\r\n\r\nconst calculate = (state:ReduxState = initData,action:Action)=>{\r\n    switch(action.type){\r\n        case INCREMENT:\r\n            return {\r\n                address: action.address\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nconst isMobileWay = (state:ReduxState = isMobileData,action:isMobileAction)=>{\r\n    switch(action.type){\r\n        case INSERTISMOBILE:\r\n            return {\r\n                isMobile: action.isMobile\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport { calculate,isMobileWay }","import { createStore,combineReducers } from \"redux\";\r\nimport { calculate,isMobileWay } from './calculate';\r\n\r\n// 全局你可以创建多个reducer 在这里统一在一起\r\nconst rootReducers = combineReducers({calculate,isMobileWay})\r\n// 全局就管理一个store\r\nexport const store = createStore(rootReducers);","import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport en_translate from './en.json';\r\nimport zh_translation from './zh.json';\r\ni18n.use(initReactI18next).init({\r\n        // fallbackLng: 'zh',\r\n        // lng: 'zh',\r\n        fallbackLng: localStorage.getItem('lang') == 'zh_CN' ? 'zh_CN':'en',\r\n        // lng: 'en',\r\n        resources:{\r\n            en:{\r\n                translation:en_translate\r\n            },\r\n            zh_CN:{\r\n                translation:zh_translation\r\n            }\r\n        },\r\n        debug: false,\r\n        interpolation: {\r\n            escapeValue: false // not needed for react as it escapes by default\r\n        }\r\n    });\r\nexport default i18n;","import React,{useState,useEffect,useRef } from 'react';\nimport { ConfigProvider, Layout } from 'antd';\nimport { BrowserRouter,Route } from \"react-router-dom\";\nimport routers from './router/index'\nimport zhCN from 'antd/lib/locale/zh_CN';\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\nimport 'antd/dist/antd.css';\nimport { setSessionStorage,getSessionStorage,sendWeb3 } from './utils/utils';\nimport Langage from './components/langage/langage';\n// 使用redux需要用到sessionStorage，需求上不允许使用缓存，所以还是存window.$address,由于子页面用的不是hooks，所以得用地址去判断，不然就改成sessionStorage\nimport { store } from './store/index'\n\nimport './locales/i18n';\nimport { useTranslation } from 'react-i18next';\nmoment.locale('zh-cn');\n\nfunction App() {\n    const { t } = useTranslation();\n    window.t = t;\n\n    const [isMobile] = useState(document.documentElement.offsetWidth > 1200);\n    // store.dispatch({ type: \"INSERTISMOBILE\",isMobile:isMobile });\n    window.isMobile = isMobile;\n\n    const [address,setAddress] = useState(store.getState().calculate.address);\n    // 可以拿到组件address更新后的值\n    // const addressRef = useRef(address);\n    // addressRef.current = address;\n    \n    // const getSissAddress = getSessionStorage('sissAddress');\n    // if(getSissAddress){\n    //     store.dispatch({ type: \"INCREMENT\",address:getSissAddress });\n    // }\n\n    if (window.ethereum) {\n        window.ethereum.on('accountsChanged', (accounts:string[]) => {\n            if (accounts[0]) {\n                window.$address = accounts[0];\n            }\n            window.location.reload();\n        });\n        window.ethereum.on('networkChanged', (networkChanged:any) => {\n            window.location.reload();\n        });\n    }\n\n    const web3 = async () => {\n        if (window.ethereum) {\n            window.ethereum.request({ method: 'eth_requestAccounts' })\n            .then((accounts:any) => {\n                if(accounts[0]){\n                    // setSessionStorage('sissAddress',accounts[0]);\n                    // store.dispatch({ type: \"INCREMENT\",address:accounts[0] });\n                    setAddress(accounts[0]);\n                    window.$address = accounts[0];\n                }\n            })\n        }\n    };\n    web3();\n    // useEffect(()=>{\n        \n    // },[address])\n\n    return (\n        <ConfigProvider locale={zhCN}>\n            <Layout>\n                <BrowserRouter>\n                    <Langage></Langage>\n                    {window.$address?(\n                        routers.map((router,index)=>{\n                            return (\n                                <Route\n                                    key={index}\n                                    exact\n                                    path={router.path}\n                                    component = { router.component }\n                                ></Route>\n                            )\n                        })\n                        ):('')\n                    }\n                </BrowserRouter>\n            </Layout>\n        </ConfigProvider>\n    );\n}\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {store} from './store';\nimport { Provider } from 'react-redux'\n\nReactDOM.render(\n  <Provider store={store}>\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}